const mongoose = require('mongoose');
const VineyardInvestment = require('artofliving/models/vineyard_investment.model');
const perPage = config.PAGINATION_PERPAGE;

const VineyardInvestmentRepository = {

    getById: async(id) => {
        let result = await VineyardInvestment.findById(id).exec();
        try {
            if (!result) {
                return null;
            }
            return result;

        } catch (e) {
            return e;
        }
    },

    getByField: async(params) => {
        let result = await VineyardInvestment.findOne(params).lean().exec();
        try {
            if (!result) {
                return null;
            }
            return result;

        } catch (e) {
            return e;
        }
    },

    getAllByField: async(params) => {
        let result = await VineyardInvestment.find(params).exec();
        try {
            if (!result) {
                return null;
            }
            return result;

        } catch (e) {
            return e;
        }
    },

    delete: async(id) => {
        try {
            let result = await VineyardInvestment.findById(id);
            if (result) {
                let resultDelete = await VineyardInvestment.remove({ _id: id }).exec();
                if (!resultDelete) {
                    return null;
                }
                return resultDelete;
            }
        } catch (e) {
            throw e;
        }
    },

    updateById: async(data, id) => {
        try {
            let result = await VineyardInvestment.findByIdAndUpdate(id, data, { new: true, upsert: true }).exec();
            if (!result) {
                return null;
            }
            return result;
        } catch (e) {
            return e;
        }
    },

};

module.exports = VineyardInvestmentRepository;